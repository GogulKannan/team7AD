@model Team7ADProjectMVC.Supplier

@{
    Layout = "~/_Layout1.cshtml";
    Page.Title = "Supplier Details";
    Employee currentEmployee = (Employee)Session["User"];
    Page.Employee = currentEmployee;
    //Author: Edwin
}


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.SupplierId)


        <div class="row">
            <div class="col-lg-6">
                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForSupplierCode">
                                Supplier Code
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.SupplierCode, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.SupplierCode, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>



                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForSupplierName">
                                Supplier Name
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.SupplierName, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.SupplierName, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>


                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForContactName">
                                Contact Name
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.ContactName, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.ContactName, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForGSTReg">
                                GST Reg.
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.GstRegistrationNo, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.GstRegistrationNo, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">

                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForPhone">
                                Phone No.
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.PhNo, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.PhNo, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForFax">
                                Fax No.
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @Html.EditorFor(model => model.FaxNo, new { htmlAttributes = new { @class = "form-control", @required = true } })
                            @Html.ValidationMessageFor(model => model.FaxNo, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-lg-3">
                            <label for="inputForAddress">
                                Address
                            </label>
                        </div>
                        <div class="col-lg-6">
                            @*<textarea class="form-control" id="Address" name="Address" type="text" value=""></textarea>*@
                            @Html.TextAreaFor(model => model.Address, new { @class = "form-control", @rows = 3, @required = true })
                            @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8"></div>
        <div class="col-md-2">
            @if(Model != null)
            {
            <button class="btn btn-primary pull-right">
                Update
            </button>
            }
            else
            {
            <button class="btn btn-primary pull-right">
                Create
            </button>
            }

            
        </div>
    </div>
}

<div><br /></div>
@if (ViewBag.SupplierId != null)
{
<div>
    <table class="table">
        <thead>
            <tr>
                <th>
                    Item Code
                </th>
                <th>
                    Description
                </th>
                <th>
                    Category
                </th>
                <th>
                    Tender Price
                </th>
            </tr>
        </thead>
        <tbody>
            
                @foreach (var item in ViewBag.SupplierItems)
                {
                    decimal x = 0;
            <tr>
                <td>
                    @item.ItemNo
                </td>
                <td>
                    @item.Description
                </td>
                <td>
                    @item.Category.CategoryName
                </td>
                
                    @if (ViewBag.SupplierId == item.SupplierId1)
                    {
                        x = @item.Price1;
                    }
                    else if (ViewBag.SupplierId == item.SupplierId2)
                    {
                        x = @item.Price2;
                    }
                    else if (ViewBag.SupplierId == item.SupplierId3)
                    {
                        x = @item.Price3;
                    }
                <td>@x</td>   
            </tr>
                }
            
        </tbody>
    </table>
</div>
}
<script>
$(document).ready(function(){
    document.getElementById("menu6").className += "active";
});
</script>